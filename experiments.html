<!DOCTYPE HTML>
<!--
	Verti by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>STEM Experiments - STEM POWERING</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />

		<!-- Schedule Calendar Stuff -->
		<link href="lib_calendar/main.css" rel="stylesheet">
		<script src="lib_calendar/main.js"></script>
		<script src="lib_calendar/calendarNevents.js"></script>
		<style>
			#calendar {
				max-width: 1100px;
				margin: 0 auto;
				margin-bottom: 3em;

		    padding: 0;
		    font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
		    font-size: 14px;

				text-decoration: none;
			}
			/* table that holds the dates */
			.fc-scrollgrid-sync-table {

			}

			#calendar table {
				margin-bottom: 0;
			}

			table thead {
				background: transparent;
			}

			/* modal style */
			#emailBtn {
				background-color: #f44336;
				margin-top: 0.6em;
				float: right;
				padding: 1em 0.75em;
				font-size: 1.2em;
			}
			#emailBtn:hover {
				background-color: #fa5c50;
			}
			#emailDes {
				margin-bottom: 1.5em;
			}
		</style>
		<script>
			// file name to download on click from the server
			var file_download = '';

			// send info to server when link pressed
			const emailHandle = function(event) {
				let emailIn = document.getElementById('emailIn');
				if (validateEmail(emailIn.value)) {
					document.getElementById('emailError').style.display = 'none';
				} else {
					document.getElementById('emailError').style.display = 'block';
					return;
				}
				// submit email into sql if successful
				let filename = 'experiment.pdf'; // default name of the file when downloaded
				let url = 'post_email.php';
				let body = {
					email: emailIn.value,
					time: new Date().toISOString().slice(0, 19).replace('T', ' '),
					file: file_download
				};
				let payload = {
					method: 'POST',
					body: JSON.stringify(body),
					headers: {
						'Content-Type': 'application/json'
					}
				};
				fetch(url, payload)
				.then((response) => {
					let dispos = response.headers.get('Content-Disposition');
					if (dispos != null) {
						// get the filename
						let pos = dispos.search('filename=');
						filename = dispos.slice(pos + 'filename='.length);
					}
					return response.blob();
				}).then(blob => downloadBlob(blob, filename));

				$.modal.close();
			}
			// on click for requesting email
			const modal_click = function(filename) {
				$('#email_modal').modal({
			    fadeDuration: 150
			  });
				file_download = filename;
			};

			const init = function(event) {
				let emailBtn = document.getElementById('emailBtn');

				emailBtn.addEventListener('click', emailHandle);
			};

			window.addEventListener('DOMContentLoaded', init);

			// true if arg is an email string
			function validateEmail(emailTest){
        var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
        return reg.test(emailTest);
			}
			// download blob on client pc
			function downloadBlob(blob, filename) {
				let url = URL.createObjectURL(blob);
				// create download link that we can trigger to download
				const a = document.createElement('a');

				a.href = url;
				a.download = filename || 'download';

				const clickHandler = () => {
			    setTimeout(() => {
			      URL.revokeObjectURL(url);
			      this.removeEventListener('click', clickHandler);
			    }, 150);
			  };

				a.addEventListener('click', clickHandler, false);

				// trigger the download
				a.click();
			}
		</script>
	</head>

	<body class="is-preload left-sidebar">
		<div id="page-wrapper">

			<!-- Header -->
				<div id="header-wrapper">
					<header id="header" class="container">

						<!-- Logo -->
							<div id="logo">
								<h1><a href="index.html"><img src="images/logo.png" alt="" /></a></h1>
							</div>

						<!-- Nav -->
							<nav id="nav">
								<ul>
									<li><a href="index.html">Home</a></li>
									<li><a href="index.html#about">About us</a></li>
									<li class="current">
										<a href="#">Events</a>
										<ul>
											<li class="current"><a href="#">STEM Experiments</a></li>
										</ul>
									</li>
									<li>
										<a href="index.html#get_involved">Get Involved</a>
									</li>
									<li>
										<a href="donate.html">Donate</a>
									</li>
									<li><a href="#contact">Contact</a></li>
									<!-- <li><a href="no-sidebar.html">No Sidebar</a></li> -->
								</ul>
							</nav>

					</header>
				</div>

			<!-- Main -->
				<div id="main-wrapper">
					<div class="container">
						<div class="row gtr-200">
							<div class="col-4 col-12-medium">
								<div id="sidebar">

									<!-- Sidebar -->
										<section>
											<h3>Months</h3>
											<ul class="style2">
												<li><a href="#exp20-08">August 2020</a></li>
												<!-- <li><a href="#exp20-07">July 2020</a></li> -->
											</ul>
										</section>

								</div>
							</div>
							<div class="col-8 col-12-medium imp-medium">
								<div id="content">

									<!-- Content -->
										<article>

											<h2>STEM Experiments</h2>

											<p>For each month STEM Powering has put together a variety of fun and easy at home experiments!
												Each experiment will branch different aspects of STEM and will encourage STEM learning.
												Find out when our experiments are released below!</p>

											<h3> Schedule </h3>

											<div id='calendar'></div>

											<h3 id="exp20-08"> August 2020 </h3>
											<ul>
												<li> <a onclick='modal_click("aug exp 1.pdf")'>What's in your Night Sky?</a> </li>
												<li> Acid Base Chemistry </li>
												<li> Ice Cream Making Using Science </li>
												<li> Take Flight and Make Your Own Plan </li>
											</ul>

											<!-- Modal for asking for email before download -->
											<div id='email_modal' class='modal' style='display: none;'>
												<div style='padding-left: 1em; padding-right: 1em;'>
												<img src="images/logo.png" alt="" style='margin-left: 7em;'>
												<h3 id='emailDes'> Enter your email and get your download! </h3>
												<form onkeydown="return event.key != 'Enter';">
													<input type='text' id='emailIn'>
													<p style='color: red; display: none;' id='emailError'> Please enter a valid email address </p>
													<input type='button' id='emailBtn' value='Download!'>
												</form>
												</div>
											</div>

										</article>

								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- Footer -->
					<div id="footer-wrapper">
						<footer id="footer" class="container">
							<div class="row">

								<div class="col-3 col-6-medium col-12-small">

									<!-- Contact -->

										<section class="widget contact last" id="contact">

											<h3>CONTACT US</h3>
											<ul>

												<li><a href="https://www.facebook.com/STEMpowering/" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
												<li><a href="https://www.instagram.com/internsoftoronto/?hl=en" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
											</ul>
											<p>221 â€“ 2300 Lawrence Ave. E<br />
											Toronto, ON M1P 2R2<br />
											stempoweringyouth@gmail.com<br />
											(416) 628-8575</p>
										</section>

								</div>
							</div>
							<div class="row">
								<div class="col-12">
									<div id="copyright">
										<ul class="menu">
											<li>&copy; STEMPOWERING. All rights reserved</li>
										</ul>
									</div>
								</div>
							</div>
						</footer>
					</div>

				</div>

		<!-- Scripts -->

			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

			<!-- jQuery Modal - by kylefox :) -->
			<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
			<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />

	</body>
</html>
